"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[5516],{63109:(G,T,a)=>{a.d(T,{Z:()=>R});var e=a(53547);const R=(v,x)=>{const[P,M]=(0,e.useState)(v);return(0,e.useEffect)(()=>{const g=setTimeout(()=>{M(v)},x);return()=>{clearTimeout(g)}},[v,x]),P}},41500:(G,T,a)=>{a.r(T),a.d(T,{MarketPlacePage:()=>ke,default:()=>yt});var e=a(53547),S=a(45349),R=a(57713),v=a(26789),x=a(20107),P=a(75878),M=a(61738),g=a(50781),K=a(96073),L=a(54375),d=a(5504),Z=a(64593),E=a(86896),A=a(7694),Q=a(63109);const H=()=>{const n=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[s,r]=(0,e.useState)(n),o=()=>r(!0),i=()=>r(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",o),window.addEventListener("offline",i),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",i)}),[]),s};var J=a(36364),C=a(80907),F=a(80631),j=a(91393);const Te=()=>{const{formatMessage:n}=(0,E.Z)(),{trackUsage:s}=(0,d.useTracking)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>s("didMissMarketplacePlugin")},e.createElement(d.ContentBox,{title:n({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:n({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(F.Z,null),iconBackground:"alternative100",endAction:e.createElement(C.J,{as:j.Z,color:"neutral600",width:3,height:3,marginLeft:2})}))};var Se=a(14020),Y=a(19442),xe=a(15800),De=a(36002),Oe=a(45697),t=a.n(Oe),N=a(88972),Be=a(92545),ie=a(50614),oe=a(473);const le=({message:n,value:s,onChange:r,possibleFilters:o,onClear:i,customizeContent:u})=>{const l=(c,m)=>`${c} (${m})`;return e.createElement(ie.P,{"data-testid":`${n}-button`,label:n,placeholder:n,size:"M",onChange:r,onClear:i,value:s,customizeContent:u,multi:!0},Object.entries(o).map(([c,m])=>e.createElement(oe.W,{"data-testid":`${c}-${m}`,key:c,value:c},l(c,m))))};le.propTypes={message:t().string.isRequired,value:t().array.isRequired,onChange:t().func.isRequired,possibleFilters:t().object.isRequired,onClear:t().func.isRequired,customizeContent:t().func.isRequired};const ce=le,de=({source:n,onToggle:s,query:r,npmPackageType:o,possibleCategories:i,possibleCollections:u,handleSelectChange:l,handleSelectClear:c})=>{const{formatMessage:m}=(0,E.Z)();return e.createElement(Be.J2,{source:n,onDismiss:s,padding:3,spacing:4},e.createElement(Le,{direction:"column",alignItems:"stretch",gap:1},e.createElement(ce,{message:m({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:r?.collections||[],onChange:f=>{l({collections:f})},onClear:()=>c("collections"),possibleFilters:u,customizeContent:f=>m({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:f.length})}),o==="plugin"&&e.createElement(ce,{message:m({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:r?.categories||[],onChange:f=>{l({categories:f})},onClear:()=>c("categories"),possibleFilters:i,customizeContent:f=>m({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:f.length}),name:"categories"})))};de.propTypes={onToggle:t().func.isRequired,source:t().shape({current:t().instanceOf(Element)}).isRequired,query:t().object.isRequired,npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const Ne=de,Le=(0,N.default)(P.k)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,X=({name:n,handleRemove:s})=>e.createElement(g.x,{padding:1},e.createElement(Se.V,{icon:e.createElement(xe.Z,null),onClick:s},n)),Ie=(0,N.default)(Y.z)`
  height: ${({theme:n})=>n.sizes.input.S};
`,ue=({possibleCollections:n,possibleCategories:s,npmPackageType:r,query:o,handleSelectClear:i,handleSelectChange:u})=>{const[l,c]=(0,e.useState)(!1),m=(0,e.useRef)(),{formatMessage:f}=(0,E.Z)(),h=()=>c(p=>!p),y=(p,k)=>{const O={[k]:o[k].filter(I=>I!==p)};u(O)};return e.createElement(e.Fragment,null,e.createElement(g.x,{paddingTop:1,paddingBottom:1},e.createElement(Ie,{variant:"tertiary",ref:m,"data-testid":"filters-button",startIcon:e.createElement(De.Z,null),onClick:h,size:"S"},f({id:"app.utils.filters",defaultMessage:"Filters"})),l&&e.createElement(Ne,{onToggle:h,source:m,query:o,handleSelectClear:i,handleSelectChange:u,possibleCollections:n,possibleCategories:s,npmPackageType:r})),o.collections?.map(p=>e.createElement(X,{name:p,key:p,handleRemove:()=>y(p,"collections")})),r==="plugin"&&o.categories?.map(p=>e.createElement(X,{name:p,key:p,handleRemove:()=>y(p,"categories")})))};X.propTypes={name:t().string.isRequired,handleRemove:t().func.isRequired},ue.propTypes={npmPackageType:t().oneOf(["plugin","provider"]).isRequired,possibleCollections:t().object.isRequired,possibleCategories:t().object.isRequired,query:t().object.isRequired,handleSelectChange:t().func.isRequired,handleSelectClear:t().func.isRequired};const je=ue;var Ze=a(28809),Ae=a(9370),$e=a(61585),D=a(78549),Fe=a(58252);const Ue=N.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  grid-gap: ${({theme:n})=>n.spaces[4]};
`,ze=(0,N.default)(g.x)`
  background: ${({theme:n})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${n.colors.neutral150} 100%)`};
  opacity: 0.33;
`,Ve=()=>e.createElement(Ue,null,Array(12).fill(null).map((n,s)=>e.createElement(ze,{key:`empty-plugin-card-${s}`,height:"234px",hasRadius:!0}))),ge=({content:n})=>e.createElement(g.x,{position:"relative","data-testid":"marketplace-results"},e.createElement(Ve,null),e.createElement(g.x,{position:"absolute",top:11,width:"100%"},e.createElement(P.k,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(C.J,{as:Fe.Z,color:"",width:"160px",height:"88px"}),e.createElement(g.x,{paddingTop:6},e.createElement(D.Z,{variant:"delta",as:"p",textColor:"neutral600"},n)))));ge.propTypes={content:t().string.isRequired};const We=ge;var q=a(74273),pe=a(80994),we=a(60324),Ge=a(23450),Ke=a.n(Ge),Qe=a(61473),He=a(8675),me=a(70780),Je=a(81249),fe=a.n(Je);const U=({description:n,installMessage:s,disabled:r,handleCopy:o,pluginName:i})=>e.createElement(q.u,{"data-testid":`tooltip-${i}`,description:n},e.createElement(g.x,null,e.createElement(Y.z,{size:"S",startIcon:e.createElement(me.Z,null),variant:"secondary",disabled:r,onClick:o},s))),_=({strapiPeerDepVersion:n,strapiAppVersion:s,handleCopy:r,pluginName:o})=>{const{formatMessage:i}=(0,E.Z)(),u=fe().validRange(n),l=fe().satisfies(s,u),c=i({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});if(s){if(!u)return e.createElement(U,{installMessage:c,pluginName:o,description:i({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:s}),handleCopy:r});if(!l)return e.createElement(U,{installMessage:c,pluginName:o,description:i({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:s,versionRange:u}),disabled:!0})}return e.createElement(Y.z,{size:"S",startIcon:e.createElement(me.Z,null),variant:"secondary",onClick:r},c)};U.defaultProps={disabled:!1,handleCopy:null},U.propTypes={description:t().string.isRequired,installMessage:t().string.isRequired,disabled:t().bool,handleCopy:t().func,pluginName:t().string.isRequired},_.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},_.propTypes={strapiAppVersion:t().string,strapiPeerDepVersion:t().string,handleCopy:t().func.isRequired,pluginName:t().string.isRequired};const Ye=_,ee=({isInstalled:n,isInDevelopmentMode:s,commandToCopy:r,strapiAppVersion:o,strapiPeerDepVersion:i,pluginName:u})=>{const l=(0,d.useNotification)(),{formatMessage:c}=(0,E.Z)(),{trackUsage:m}=(0,d.useTracking)(),{copy:f}=(0,d.useClipboard)(),h=async()=>{await f(r)&&(m("willInstallPlugin"),l({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}}))};return n?e.createElement(g.x,{paddingLeft:4},e.createElement(C.J,{as:He.Z,marginRight:2,width:12,height:12,color:"success600"}),e.createElement(D.Z,{variant:"omega",textColor:"success600",fontWeight:"bold"},c({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):s?e.createElement(Ye,{strapiAppVersion:o,strapiPeerDepVersion:i,handleCopy:h,pluginName:u}):null};ee.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},ee.propTypes={isInstalled:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,commandToCopy:t().string.isRequired,strapiAppVersion:t().string,strapiPeerDepVersion:t().string,pluginName:t().string.isRequired};const Xe=ee;var qe=a(81984),_e=a(86820),et=a(71125),tt=a(52794);const at=(0,N.default)(qe.i)`
  width: ${(0,d.pxToRem)(12)};
  transform: rotate(90deg);
`,te=({githubStars:n,npmDownloads:s,npmPackageType:r})=>{const{formatMessage:o}=(0,E.Z)();return e.createElement(P.k,{gap:1},!!n&&e.createElement(e.Fragment,null,e.createElement(C.J,{as:_e.Z,height:(0,d.pxToRem)(12),width:(0,d.pxToRem)(12),"aria-hidden":!0}),e.createElement(C.J,{as:et.Z,height:(0,d.pxToRem)(12),width:(0,d.pxToRem)(12),color:"warning500","aria-hidden":!0}),e.createElement("p",{"aria-label":o({id:`admin.pages.MarketPlacePage.${r}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:n,package:r})},e.createElement(D.Z,{variant:"pi",textColor:"neutral800"},n)),e.createElement(at,{unsetMargin:!1,background:"neutral200"})),e.createElement(C.J,{as:tt.Z,height:(0,d.pxToRem)(12),width:(0,d.pxToRem)(12),"aria-hidden":!0}),e.createElement("p",{"aria-label":o({id:`admin.pages.MarketPlacePage.${r}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:s,package:r})},e.createElement(D.Z,{variant:"pi",textColor:"neutral800"},s)))};te.defaultProps={githubStars:0,npmDownloads:0},te.propTypes={githubStars:t().number,npmDownloads:t().number,npmPackageType:t().string.isRequired};const nt=te,st=(0,N.default)(D.Z)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,ae=({npmPackage:n,isInstalled:s,useYarn:r,isInDevelopmentMode:o,npmPackageType:i,strapiAppVersion:u})=>{const{attributes:l}=n,{formatMessage:c}=(0,E.Z)(),{trackUsage:m}=(0,d.useTracking)(),f=r?`yarn add ${l.npmPackageName}`:`npm install ${l.npmPackageName}`,h=c({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),y=`https://market.strapi.io/${Ke().plural(i)}/${l.slug}`;return e.createElement(P.k,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(g.x,null,e.createElement(P.k,{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},e.createElement(g.x,{as:"img",src:l.logo.url,alt:`${l.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(nt,{githubStars:l.githubStars,npmDownloads:l.npmDownloads,npmPackageType:i})),e.createElement(g.x,{paddingTop:4},e.createElement(D.Z,{as:"h3",variant:"delta"},e.createElement(P.k,{alignItems:"center"},l.name,l.validated&&!l.madeByStrapi&&e.createElement(q.u,{description:c({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(P.k,null,e.createElement(C.J,{as:we.Z,marginLeft:2,color:"success600"}))),l.madeByStrapi&&e.createElement(q.u,{description:h},e.createElement(P.k,null,e.createElement(g.x,{as:"img",src:Qe,alt:h,marginLeft:1,width:6,height:"auto"})))))),e.createElement(g.x,{paddingTop:2},e.createElement(st,{as:"p",variant:"omega",textColor:"neutral600"},l.description))),e.createElement(P.k,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(pe.Q,{size:"S",href:y,isExternal:!0,endIcon:e.createElement(j.Z,null),"aria-label":c({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:l.name}),variant:"tertiary",onClick:()=>m("didPluginLearnMore")},c({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})),e.createElement(Xe,{isInstalled:s,isInDevelopmentMode:o,commandToCopy:f,strapiAppVersion:u,strapiPeerDepVersion:l.strapiVersion,pluginName:l.name})))};ae.defaultProps={isInDevelopmentMode:!1,strapiAppVersion:null},ae.propTypes={npmPackage:t().shape({id:t().string.isRequired,attributes:t().shape({name:t().string.isRequired,description:t().string.isRequired,slug:t().string.isRequired,npmPackageName:t().string.isRequired,npmPackageUrl:t().string.isRequired,repositoryUrl:t().string.isRequired,logo:t().object.isRequired,developerName:t().string.isRequired,validated:t().bool.isRequired,madeByStrapi:t().bool.isRequired,strapiCompatibility:t().oneOf(["v3","v4"]),strapiVersion:t().string,githubStars:t().number,npmDownloads:t().number}).isRequired}).isRequired,isInstalled:t().bool.isRequired,useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool,npmPackageType:t().string.isRequired,strapiAppVersion:t().string};const rt=ae,ne=({status:n,npmPackages:s,installedPackageNames:r,useYarn:o,isInDevelopmentMode:i,npmPackageType:u,strapiAppVersion:l,debouncedSearch:c})=>{const{formatMessage:m}=(0,E.Z)();if(n==="error")return e.createElement(P.k,{paddingTop:8},e.createElement(d.AnErrorOccurred,null));if(n==="loading")return e.createElement(P.k,{justifyContent:"center",paddingTop:8},e.createElement(Ze.a,null,"Loading content..."));const f=m({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:c});return s.length===0?e.createElement(We,{content:f}):e.createElement(Ae.r,{gap:4,"data-testid":"marketplace-results"},s.map(h=>e.createElement($e.P,{col:4,s:6,xs:12,style:{height:"100%"},key:h.id},e.createElement(rt,{npmPackage:h,isInstalled:r.includes(h.attributes.npmPackageName),useYarn:o,isInDevelopmentMode:i,npmPackageType:u,strapiAppVersion:l}))))};ne.defaultProps={npmPackages:[],installedPackageNames:[],strapiAppVersion:null,debouncedSearch:""},ne.propTypes={status:t().string.isRequired,npmPackages:t().array,installedPackageNames:t().arrayOf(t().string),useYarn:t().bool.isRequired,isInDevelopmentMode:t().bool.isRequired,npmPackageType:t().string.isRequired,strapiAppVersion:t().string,debouncedSearch:t().string};const Pe=ne,he=({pagination:n})=>e.createElement(g.x,{paddingTop:4},e.createElement(P.k,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(d.PageSizeURLQuery,{options:["12","24","50","100"],defaultValue:"24"}),e.createElement(d.PaginationURLQuery,{pagination:n})));he.propTypes={pagination:t().shape({page:t().number.isRequired,pageCount:t().number.isRequired,pageSize:t().number.isRequired,total:t().number.isRequired}).isRequired};const it=he,ot=a.p+"9d5d788027e86620c234.svg";var lt=a(79371),ct=a(76838);const se=({isOnline:n,npmPackageType:s})=>{const{formatMessage:r}=(0,E.Z)(),{trackUsage:o}=(0,d.useTracking)(),i=s==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(lt.T,{title:r({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:r({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:n&&e.createElement(pe.Q,{startIcon:e.createElement(ct.Z,null),variant:"tertiary",href:`https://market.strapi.io/submit-${s}`,onClick:()=>o(i),isExternal:!0},r({id:`admin.pages.MarketPlacePage.submit.${s}.link`,defaultMessage:`Submit ${s}`}))})},Ee=se;se.defaultProps={npmPackageType:"plugin"},se.propTypes={isOnline:t().bool.isRequired,npmPackageType:t().string};const dt=()=>{const{formatMessage:n}=(0,E.Z)();return e.createElement(S.A,null,e.createElement(R.o,null,e.createElement(Ee,{isOnline:!1}),e.createElement(P.k,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:(0,d.pxToRem)(120)},e.createElement(g.x,{paddingBottom:2},e.createElement(D.Z,{textColor:"neutral700",variant:"alpha"},n({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(g.x,{paddingBottom:6},e.createElement(D.Z,{textColor:"neutral700",variant:"epsilon"},n({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:ot,alt:"offline",style:{width:"88px",height:"88px"}}))))},ut=(0,N.default)(g.x)`
  font-weight: ${({theme:n})=>n.fontWeights.semiBold};

  span {
    font-size: ${({theme:n})=>n.fontSizes[1]};
  }

  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,ve=({sortQuery:n,handleSelectChange:s})=>{const{formatMessage:r}=(0,E.Z)(),o={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}};return e.createElement(ut,null,e.createElement(ie.P,{size:"S",id:"sort-by-select",value:n,customizeContent:()=>r(o[n].selected),onChange:i=>{s({sort:i})},label:r({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"})},Object.entries(o).map(([i,u])=>e.createElement(oe.W,{key:i,value:i},r(u.option)))))};ve.propTypes={sortQuery:t().string.isRequired,handleSelectChange:t().func.isRequired};const gt=ve;var pt=a(46683),mt=a(80129),z=a.n(mt),Me=a(75336);const ye="https://market-api.strapi.io",ft=async(n={})=>{try{const s=z().stringify(z().parse(n)),r=await fetch(`${ye}/plugins?${s}`);if(!r.ok)throw new Error("Failed to fetch marketplace plugins.");return await r.json()}catch(s){console.error(s)}return null},Pt=(n,s)=>{const r=(0,d.useNotification)();return(0,Me.useQuery)(["list-marketplace-plugins",s],()=>ft(s),{onSuccess(){n&&n()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})},ht=async(n={})=>{try{const s=z().stringify(z().parse(n)),r=await fetch(`${ye}/providers?${s}`);if(!r.ok)throw new Error("Failed to fetch marketplace providers.");return await r.json()}catch(s){console.error(s)}return null},Et=(n,s)=>{const r=(0,d.useNotification)();return(0,Me.useQuery)(["list-marketplace-providers",s],()=>ht(s),{onSuccess(){n&&n()},onError(){r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};function vt({npmPackageType:n,debouncedSearch:s,query:r,tabQuery:o}){const{notifyStatus:i}=(0,pt.G)(),{formatMessage:u}=(0,E.Z)(),l=u({id:"global.marketplace",defaultMessage:"Marketplace"}),c=()=>{i(u({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:l}))},m={page:r?.page||1,pageSize:r?.pageSize||24},{data:f,status:h}=Pt(c,{...o.plugin,pagination:m,search:s}),{data:y,status:p}=Et(c,{...o.provider,pagination:m,search:s}),k=n==="plugin"?f:y,O=n==="plugin"?h:p,[I,V]=(0,e.useState)({}),[W,w]=(0,e.useState)({});(0,e.useEffect)(()=>{O==="success"&&V(k.meta.collections),h==="success"&&w(f.meta.categories)},[f?.meta.categories,h,k?.meta.collections,O]);const{pagination:re}=O==="success"?k.meta:{};return{pluginsResponse:f,providersResponse:y,pluginsStatus:h,providersStatus:p,possibleCollections:I,possibleCategories:W,pagination:re}}const Mt=vt,ke=()=>{const{formatMessage:n}=(0,E.Z)(),{trackUsage:s}=(0,d.useTracking)(),r=(0,e.useRef)(s),o=(0,d.useNotification)(),[{query:i},u]=(0,d.useQueryParams)(),l=(0,Q.Z)(i?.search,500)||"",{autoReload:c,dependencies:m,useYarn:f,strapiVersion:h}=(0,d.useAppInfo)(),y=H(),p=i?.npmPackageType||"plugin",[k,O]=(0,e.useState)({plugin:p==="plugin"?{...i}:{},provider:p==="provider"?{...i}:{}});(0,d.useFocusWhenNavigate)(),(0,e.useEffect)(()=>{r.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{c||o({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"},blockTransition:!0})},[o,c]);const{pluginsResponse:I,providersResponse:V,pluginsStatus:W,providersStatus:w,possibleCollections:re,possibleCategories:kt,pagination:be}=Mt({npmPackageType:p,debouncedSearch:l,query:i,tabQuery:k});if(!y)return e.createElement(dt,null);const bt=B=>{const b=B===0?"plugin":"provider",Ct=k[b]&&Object.keys(k[b]).length;u(Ct?{...k[b],search:i?.search||"",npmPackageType:b,page:1}:{npmPackageType:b,collections:[],categories:[],sort:"name:asc",page:1,search:i?.search||""})},Re=B=>{u({...B,page:1}),O(b=>({...b,[p]:{...b[p],...B}}))},Rt=B=>{u({[B]:[],page:null},"remove"),O(b=>({...b,[p]:{}}))},Ce=Object.keys(m);return e.createElement(S.A,null,e.createElement(R.o,null,e.createElement(Z.q,{title:n({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(Ee,{isOnline:y,npmPackageType:p}),e.createElement(v.D,null,e.createElement(x.v,{label:n({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",initialSelectedTabIndex:["plugin","provider"].indexOf(p),onTabChange:bt},e.createElement(P.k,{justifyContent:"space-between",paddingBottom:4},e.createElement(M.m,null,e.createElement(M.O,null,n({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",W==="success"?`(${I.meta.pagination.total})`:"..."),e.createElement(M.O,null,n({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",w==="success"?`(${V.meta.pagination.total})`:"...")),e.createElement(g.x,{width:"25%"},e.createElement(K.w,{name:"searchbar",onClear:()=>u({search:"",page:1}),value:i?.search,onChange:B=>u({search:B.target.value,page:1}),clearLabel:n({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})))),e.createElement(P.k,{paddingBottom:4,gap:2},e.createElement(gt,{sortQuery:i?.sort||"name:asc",handleSelectChange:Re}),e.createElement(je,{npmPackageType:p,possibleCollections:re,possibleCategories:kt,query:i||{},handleSelectChange:Re,handleSelectClear:Rt})),e.createElement(L.n,null,e.createElement(L.x,null,e.createElement(Pe,{npmPackages:I?.data,status:W,installedPackageNames:Ce,useYarn:f,isInDevelopmentMode:c,npmPackageType:"plugin",strapiAppVersion:h,debouncedSearch:l})),e.createElement(L.x,null,e.createElement(Pe,{npmPackages:V?.data,status:w,installedPackageNames:Ce,useYarn:f,isInDevelopmentMode:c,npmPackageType:"provider",debouncedSearch:l})))),be&&e.createElement(it,{pagination:be}),e.createElement(g.x,{paddingTop:8},e.createElement(Te,null)))))},yt=()=>{const n=(0,A.v9)(J._);return e.createElement(d.CheckPagePermissions,{permissions:n.marketplace.main},e.createElement(ke,null))}},45349:(G,T,a)=>{a.d(T,{A:()=>P});var e=a(2790),S=a(88972),R=a(50781);const v=(0,S.default)(R.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:M})=>M?"auto 1fr":"1fr"};
`,x=(0,S.default)(R.x)`
  overflow-x: hidden;
`,P=({sideNav:M,children:g})=>(0,e.jsxs)(v,{hasSideNav:!!M,children:[M,(0,e.jsx)(x,{paddingBottom:10,children:g})]})},80994:(G,T,a)=>{a.d(T,{Q:()=>L});var e=a(85893),S=a(53547),R=a(88972),v=a(92577),x=a(21817),P=a(63507),M=a(11047),g=a(75515);const K=(0,R.default)(x.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${v.sg}
    &:active {
      ${v.sg}
    }
  }

  &:hover {
    ${v.yP}
  }

  &:active {
    ${v.tB}
  }

  ${v.PD}
`,L=S.forwardRef(({variant:d="default",startIcon:Z,endIcon:E,disabled:A=!1,children:Q,size:$="S",as:H=P.f,...J},C)=>{const F=$==="S"?2:"10px",j=4;return(0,e.jsxs)(K,{ref:C,"aria-disabled":A,size:$,variant:d,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:F,paddingLeft:j,paddingRight:j,paddingTop:F,pointerEvents:A?"none":void 0,...J,as:H||P.f,children:[Z&&(0,e.jsx)(M.k,{"aria-hidden":!0,children:Z}),(0,e.jsx)(g.Z,{variant:$==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:Q}),E&&(0,e.jsx)(M.k,{"aria-hidden":!0,children:E})]})});L.displayName="LinkButton"}}]);
