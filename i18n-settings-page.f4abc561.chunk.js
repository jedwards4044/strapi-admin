"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[3552],{31701:(N,S,t)=>{t.r(S),t.d(S,{default:()=>Ue});var e=t(53547),d=t(5504),T=t(45697),i=t.n(T),p=t(86896),j=t(57713),L=t(79371),C=t(19442),R=t(26789),I=t(81391),W=t(12978),z=t(58252),m=t(47235),a=t(3804),f=t(94649),v=t(8675),h=t(60881),x=t(18189),E=t(78549),F=t(48683),U=t(20107),A=t(75878),b=t(61738),w=t(81984),k=t(50781),P=t(54375),q=t(45124),H=t(87561);const _=(0,H.object)().shape({code:(0,H.string)().required(),displayName:(0,H.string)().max(50,"Settings.locales.modal.locales.displayName.error").required(d.translatedErrors.required)});var K=t(7694),$=t(70437);const re=()=>{const[n,s]=(0,e.useState)(!1),o=(0,K.I0)(),l=(0,d.useNotification)(),{put:c}=(0,d.useFetchClient)();return{isEditing:n,editLocale:async(u,g)=>{try{s(!0);const{data:y}=await c(`/i18n/locales/${u}`,g);l({type:"success",message:{id:(0,a.O)("Settings.locales.modal.edit.success")}}),o({type:$.OT,editedLocale:y})}catch{l({type:"warning",message:{id:"notification.error"}})}finally{s(!1)}}}};var ee=t(9370),V=t(61585),ue=t(50614),me=t(473),te=t(28469),ge=t(75336),fe=t(46683);const ae=()=>{const{formatMessage:n}=(0,p.Z)(),{notifyStatus:s}=(0,fe.G)(),o=(0,d.useNotification)(),{get:l}=(0,d.useFetchClient)(),{isLoading:c,data:r}=(0,ge.useQuery)(["plugin-i18n","locales"],async()=>{try{const{data:u}=await l("/i18n/iso-locales");return s(n({id:(0,a.O)("Settings.locales.modal.locales.loaded"),defaultMessage:"The locales have been successfully loaded."})),u}catch{return o({type:"warning",message:{id:"notification.error"}}),[]}});return{defaultLocales:r,isLoading:c}},le=({locale:n})=>{const{formatMessage:s}=(0,p.Z)(),{values:o,handleChange:l,errors:c}=(0,f.useFormikContext)(),{defaultLocales:r,isLoading:u}=ae(),g=!u&&r.find(y=>y.code===n.code);return e.createElement(ee.r,{gap:4},e.createElement(V.P,{col:6},e.createElement(ue.P,{label:s({id:(0,a.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:g?.code||n.code,disabled:!0},e.createElement(me.W,{value:g?.code||n.code},g?.name||n.code))),e.createElement(V.P,{col:6},e.createElement(te.o,{name:"displayName",label:s({id:(0,a.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:s({id:(0,a.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:c.displayName?s({id:(0,a.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:o.displayName,onChange:l})))},ve=le;le.propTypes={locale:i().shape({id:i().number.isRequired,name:i().string.isRequired,code:i().string.isRequired,isDefault:i().bool.isRequired}).isRequired};var ne=t(13539);const se=({isDefaultLocale:n})=>{const{values:s,setFieldValue:o}=(0,f.useFormikContext)(),{formatMessage:l}=(0,p.Z)();return e.createElement(ne.X,{name:"isDefault",hint:l({id:(0,a.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>o("isDefault",!s.isDefault),value:s.isDefault,disabled:n},l({id:(0,a.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))};se.propTypes={isDefaultLocale:i().bool.isRequired};const he=se,G=({locale:n,onClose:s})=>{const{refetchPermissions:o}=(0,d.useRBACProvider)(),{isEditing:l,editLocale:c}=re(),{formatMessage:r}=(0,p.Z)(),u=async({displayName:g,isDefault:y})=>{await c(n.id,{name:g,isDefault:y}),await o()};return e.createElement(h.P,{onClose:s,labelledBy:"edit-locale-title"},e.createElement(f.Formik,{initialValues:{code:n?.code,displayName:n?.name||"",isDefault:Boolean(n?.isDefault)},onSubmit:u,validationSchema:_},e.createElement(d.Form,null,e.createElement(x.x,null,e.createElement(E.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"edit-locale-title"},r({id:(0,a.O)("Settings.list.actions.edit"),defaultMessage:"Edit a locale"}))),e.createElement(F.f,null,e.createElement(U.v,{label:r({id:(0,a.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(A.k,{justifyContent:"space-between"},e.createElement(E.Z,{as:"h2"},r({id:(0,a.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(b.m,null,e.createElement(b.O,null,r({id:(0,a.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(b.O,null,r({id:(0,a.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(w.i,null),e.createElement(k.x,{paddingTop:7,paddingBottom:7},e.createElement(P.n,null,e.createElement(P.x,null,e.createElement(ve,{locale:n})),e.createElement(P.x,null,e.createElement(he,{isDefaultLocale:Boolean(n&&n.isDefault)})))))),e.createElement(q.m,{startActions:e.createElement(C.z,{variant:"tertiary",onClick:s},r({id:"app.components.Button.cancel"})),endActions:e.createElement(C.z,{type:"submit",startIcon:e.createElement(v.Z,null),disabled:l},r({id:"global.save"}))}))))};G.defaultProps={locale:void 0},G.propTypes={locale:i().shape({id:i().number.isRequired,name:i().string.isRequired,code:i().string.isRequired,isDefault:i().bool.isRequired}),onClose:i().func.isRequired};const Ee=G,pe=()=>{const[n,s]=(0,e.useState)(!1),o=(0,K.I0)(),l=(0,d.useNotification)(),{del:c}=(0,d.useFetchClient)();return{isDeleting:n,deleteLocale:async u=>{try{s(!0),await c(`/i18n/locales/${u}`),l({type:"success",message:{id:(0,a.O)("Settings.locales.modal.delete.success")}}),o({type:$.HC,id:u})}catch{l({type:"warning",message:{id:"notification.error"}})}finally{s(!1)}}}},Q=({localeToDelete:n,onClose:s})=>{const{isDeleting:o,deleteLocale:l}=pe(),c=Boolean(n),r=()=>l(n.id).then(s);return e.createElement(d.ConfirmDialog,{isConfirmButtonLoading:o,onConfirm:r,onToggleDialog:s,isOpen:c})};Q.defaultProps={localeToDelete:void 0},Q.propTypes={localeToDelete:i().shape({id:i().number.isRequired}),onClose:i().func.isRequired};const ye=Q;var Le=t(27361),Ce=t.n(Le);const xe=()=>{const[n,s]=(0,e.useState)(!1),o=(0,K.I0)(),l=(0,d.useNotification)(),{post:c}=(0,d.useFetchClient)();return{isAdding:n,addLocale:async u=>{s(!0);try{const{data:g}=await c("/i18n/locales",u);l({type:"success",message:{id:(0,a.O)("Settings.locales.modal.create.success")}}),o({type:$.xz,newLocale:g})}catch(g){const y=Ce()(g,"response.payload.message",null);throw y&&y.includes("already exists")?l({type:"warning",message:{id:(0,a.O)("Settings.locales.modal.create.alreadyExist")}}):l({type:"warning",message:{id:"notification.error"}}),g}finally{s(!1)}}}};var Me=t(63122),Se=t(85612);const X=e.memo(({value:n,onClear:s,onLocaleChange:o,error:l})=>{const{formatMessage:c}=(0,p.Z)(),{defaultLocales:r,isLoading:u}=ae(),{locales:g}=(0,m.Z)(),y=(r||[]).map(M=>({label:M.name,value:M.code})).filter(({value:M})=>{const D=g.find(({code:Z})=>Z===M);return!D||D.code===n}),B=n||"";return e.createElement(Me.hQ,{"aria-busy":u,error:l,label:c({id:(0,a.O)("Settings.locales.modal.locales.label"),defaultMessage:"Locales"}),value:B,onClear:n?s:void 0,onChange:M=>{const D=y.find(Z=>Z.value===M);D&&o({code:D.value,displayName:D.label})},placeholder:c({id:"components.placeholder.select",defaultMessage:"Select"})},y.map(M=>e.createElement(Se.O,{value:M.value,key:M.value},M.label)))});X.defaultProps={error:void 0,value:void 0,onClear(){},onLocaleChange:()=>{}},X.propTypes={error:i().string,onClear:i().func,onLocaleChange:i().func,value:i().string};const Oe=X,De=()=>{const{formatMessage:n}=(0,p.Z)(),{values:s,handleChange:o,setFieldValue:l,errors:c}=(0,f.useFormikContext)(),r=(0,e.useCallback)(g=>{l("displayName",g.displayName),l("code",g.code)},[l]),u=(0,e.useCallback)(()=>{l("displayName",""),l("code","")},[l]);return e.createElement(ee.r,{gap:4},e.createElement(V.P,{col:6},e.createElement(Oe,{error:c.code,value:s.code,onLocaleChange:r,onClear:u})),e.createElement(V.P,{col:6},e.createElement(te.o,{name:"displayName",label:n({id:(0,a.O)("Settings.locales.modal.locales.displayName"),defaultMessage:"Locale display name"}),hint:n({id:(0,a.O)("Settings.locales.modal.locales.displayName.description"),defaultMessage:"Locale will be displayed under that name in the administration panel"}),error:c.displayName?n({id:(0,a.O)("Settings.locales.modal.locales.displayName.error"),defaultMessage:"The locale display name can only be less than 50 characters."}):void 0,value:s.displayName,onChange:o})))},Te=()=>{const{values:n,setFieldValue:s}=(0,f.useFormikContext)(),{formatMessage:o}=(0,p.Z)();return e.createElement(ne.X,{hint:o({id:(0,a.O)("Settings.locales.modal.advanced.setAsDefault.hint"),defaultMessage:"One default locale is required, change it by selecting another one"}),onChange:()=>s("isDefault",!n.isDefault),value:n.isDefault},o({id:(0,a.O)("Settings.locales.modal.advanced.setAsDefault"),defaultMessage:"Set as default locale"}))},Be={code:"",displayName:"",isDefault:!1},oe=({onClose:n})=>{const{isAdding:s,addLocale:o}=xe(),{formatMessage:l}=(0,p.Z)(),{refetchPermissions:c}=(0,d.useRBACProvider)(),r=async u=>{await o({code:u.code,name:u.displayName,isDefault:u.isDefault}),await c()};return e.createElement(h.P,{onClose:n,labelledBy:"add-locale-title"},e.createElement(f.Formik,{initialValues:Be,onSubmit:r,validationSchema:_,validateOnChange:!1},e.createElement(d.Form,null,e.createElement(x.x,null,e.createElement(E.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"add-locale-title"},l({id:(0,a.O)("Settings.list.actions.add"),defaultMessage:"Add new locale"}))),e.createElement(F.f,null,e.createElement(U.v,{label:l({id:(0,a.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"}),id:"tabs",variant:"simple"},e.createElement(A.k,{justifyContent:"space-between"},e.createElement(E.Z,{as:"h2",variant:"beta"},l({id:(0,a.O)("Settings.locales.modal.title"),defaultMessage:"Configurations"})),e.createElement(b.m,null,e.createElement(b.O,null,l({id:(0,a.O)("Settings.locales.modal.base"),defaultMessage:"Basic settings"})),e.createElement(b.O,null,l({id:(0,a.O)("Settings.locales.modal.advanced"),defaultMessage:"Advanced settings"})))),e.createElement(w.i,null),e.createElement(k.x,{paddingTop:7,paddingBottom:7},e.createElement(P.n,null,e.createElement(P.x,null,e.createElement(De,null)),e.createElement(P.x,null,e.createElement(Te,null)))))),e.createElement(q.m,{startActions:e.createElement(C.z,{variant:"tertiary",onClick:n},l({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(C.z,{type:"submit",startIcon:e.createElement(v.Z,null),disabled:s},l({id:"global.save",defaultMessage:"Save"}))}))))};oe.propTypes={onClose:i().func.isRequired};const Re=oe;var Ae=t(51541),be=t(42403),ie=t(6090),O=t(62351),Pe=t(22996),je=t(94487),ce=t(37527),Fe=t(36670),Ze=t(34263);const J=({locales:n,onDeleteLocale:s,onEditLocale:o})=>{const{formatMessage:l}=(0,p.Z)();return e.createElement(Ae.i,{colCount:4,rowCount:n.length+1},e.createElement(be.h,null,e.createElement(ie.Tr,null,e.createElement(O.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},l({id:(0,a.O)("Settings.locales.row.id")}))),e.createElement(O.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},l({id:(0,a.O)("Settings.locales.row.displayName")}))),e.createElement(O.Th,null,e.createElement(E.Z,{variant:"sigma",textColor:"neutral600"},l({id:(0,a.O)("Settings.locales.row.default-locale")}))),e.createElement(O.Th,null,e.createElement(Pe.T,null,"Actions")))),e.createElement(je.p,null,n.map(c=>e.createElement(ie.Tr,{key:c.id,...(0,d.onRowClick)({fn:()=>o(c),condition:o})},e.createElement(O.Td,null,e.createElement(E.Z,{textColor:"neutral800"},c.id)),e.createElement(O.Td,null,e.createElement(E.Z,{textColor:"neutral800"},c.name)),e.createElement(O.Td,null,e.createElement(E.Z,{textColor:"neutral800"},c.isDefault?l({id:(0,a.O)("Settings.locales.default")}):null)),e.createElement(O.Td,null,e.createElement(A.k,{gap:1,justifyContent:"flex-end",...d.stopPropagation},o&&e.createElement(ce.h,{onClick:()=>o(c),label:l({id:(0,a.O)("Settings.list.actions.edit")}),icon:e.createElement(Fe.Z,null),noBorder:!0}),s&&!c.isDefault&&e.createElement(ce.h,{onClick:()=>s(c),label:l({id:(0,a.O)("Settings.list.actions.delete")}),icon:e.createElement(Ze.Z,null),noBorder:!0})))))))};J.defaultProps={locales:[],onDeleteLocale:void 0,onEditLocale:void 0},J.propTypes={locales:i().array,onDeleteLocale:i().func,onEditLocale:i().func};const Ne=J,Y=({canUpdateLocale:n,canDeleteLocale:s,onToggleCreateModal:o,isCreating:l})=>{const[c,r]=(0,e.useState)(),[u,g]=(0,e.useState)(),{locales:y}=(0,m.Z)(),{formatMessage:B}=(0,p.Z)();(0,d.useFocusWhenNavigate)();const M=()=>r(void 0),D=s?r:void 0,Z=()=>g(void 0),Ve=n?g:void 0;return e.createElement(j.o,{tabIndex:-1},e.createElement(L.T,{primaryAction:e.createElement(C.z,{startIcon:e.createElement(W.Z,null),onClick:o,size:"S"},B({id:(0,a.O)("Settings.list.actions.add")})),title:B({id:(0,a.O)("plugin.name")}),subtitle:B({id:(0,a.O)("Settings.list.description")})}),e.createElement(R.D,null,y?.length>0?e.createElement(Ne,{locales:y,onDeleteLocale:D,onEditLocale:Ve}):e.createElement(I.x,{icon:e.createElement(z.Z,{width:void 0,height:void 0}),content:B({id:(0,a.O)("Settings.list.empty.title")}),action:o?e.createElement(C.z,{variant:"secondary",startIcon:e.createElement(W.Z,null),onClick:o},B({id:(0,a.O)("Settings.list.actions.add")})):null})),l&&e.createElement(Re,{onClose:o}),u&&e.createElement(Ee,{onClose:Z,locale:u}),e.createElement(ye,{localeToDelete:c,onClose:M}))};Y.defaultProps={onToggleCreateModal:void 0},Y.propTypes={canUpdateLocale:i().bool.isRequired,canDeleteLocale:i().bool.isRequired,onToggleCreateModal:i().func,isCreating:i().bool.isRequired};const Ie=Y,de=({canReadLocale:n,canCreateLocale:s,canDeleteLocale:o,canUpdateLocale:l})=>{const[c,r]=(0,e.useState)(!1),u=s?()=>r(g=>!g):void 0;return n?e.createElement(Ie,{canUpdateLocale:l,canDeleteLocale:o,onToggleCreateModal:u,isCreating:c}):null};de.propTypes={canReadLocale:i().bool.isRequired,canCreateLocale:i().bool.isRequired,canUpdateLocale:i().bool.isRequired,canDeleteLocale:i().bool.isRequired};const We=de;var ze=t(97473);const Ue=()=>{const{isLoading:n,allowedActions:{canRead:s,canUpdate:o,canCreate:l,canDelete:c}}=(0,d.useRBAC)(ze.Z);return n?null:e.createElement(We,{canReadLocale:s,canCreateLocale:l,canUpdateLocale:o,canDeleteLocale:c})}},85612:(N,S,t)=>{t.d(S,{O:()=>d});var e=t(63122);const d=e.Wx},26789:(N,S,t)=>{t.d(S,{D:()=>T});var e=t(2790),d=t(50781);const T=({children:i})=>(0,e.jsx)(d.x,{paddingLeft:10,paddingRight:10,children:i})},79371:(N,S,t)=>{t.d(S,{T:()=>I});var e=t(2790),d=t(53547),T=t(88972);const i=m=>{const a=(0,d.useRef)(null),[f,v]=(0,d.useState)(!0),h=([x])=>{v(x.isIntersecting)};return(0,d.useEffect)(()=>{const x=a.current,E=new IntersectionObserver(h,m);return x&&E.observe(a.current),()=>{x&&E.disconnect()}},[a,m]),[a,f]};var p=t(79698);const j=(m,a)=>{const f=(0,p.W)(a);(0,d.useLayoutEffect)(()=>{const v=new ResizeObserver(f);return Array.isArray(m)?m.forEach(h=>{h.current&&v.observe(h.current)}):m.current&&v.observe(m.current),()=>{v.disconnect()}},[m,f])};var L=t(50781),C=t(75878),R=t(78549);const I=m=>{const a=(0,d.useRef)(null),[f,v]=(0,d.useState)(null),[h,x]=i({root:null,rootMargin:"0px",threshold:0});return j(h,()=>{h.current&&v(h.current.getBoundingClientRect())}),(0,d.useEffect)(()=>{a.current&&v(a.current.getBoundingClientRect())},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:f?.height},ref:h,children:x&&(0,e.jsx)(z,{ref:a,...m})}),!x&&(0,e.jsx)(z,{...m,sticky:!0,width:f?.width})]})};I.displayName="HeaderLayout";const W=(0,T.default)(L.x)`
  width: ${({width:m})=>m?`${m/16}rem`:void 0};
  z-index: ${({theme:m})=>m.zIndices[1]};
`,z=d.forwardRef(({navigationAction:m,primaryAction:a,secondaryAction:f,subtitle:v,title:h,sticky:x,width:E,...F},U)=>{const A=typeof v=="string";return x?(0,e.jsx)(W,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:E,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(C.k,{justifyContent:"space-between",children:[(0,e.jsxs)(C.k,{children:[m&&(0,e.jsx)(L.x,{paddingRight:3,children:m}),(0,e.jsxs)(L.x,{children:[(0,e.jsx)(R.Z,{variant:"beta",as:"h1",...F,children:h}),A?(0,e.jsx)(R.Z,{variant:"pi",textColor:"neutral600",children:v}):v]}),f?(0,e.jsx)(L.x,{paddingLeft:4,children:f}):null]}),(0,e.jsx)(C.k,{children:a?(0,e.jsx)(L.x,{paddingLeft:2,children:a}):void 0})]})}):(0,e.jsxs)(L.x,{ref:U,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:m?6:8,background:"neutral100","data-strapi-header":!0,children:[m?(0,e.jsx)(L.x,{paddingBottom:2,children:m}):null,(0,e.jsxs)(C.k,{justifyContent:"space-between",children:[(0,e.jsxs)(C.k,{minWidth:0,children:[(0,e.jsx)(R.Z,{as:"h1",variant:"alpha",...F,children:h}),f?(0,e.jsx)(L.x,{paddingLeft:4,children:f}):null]}),a]}),A?(0,e.jsx)(R.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:v}):v]})})},57713:(N,S,t)=>{t.d(S,{o:()=>p});var e=t(2790),d=t(88972),T=t(50781);const i=(0,d.default)(T.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,p=({labelledBy:j="main-content-title",...L})=>(0,e.jsx)(i,{"aria-labelledby":j,as:"main",id:"main-content",tabIndex:-1,...L})}}]);
