"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[8385],{52713:(W,L,s)=>{s.d(L,{r:()=>v});var m=s(53547),p=s(50781),A=s(45697),C=s.n(A),S=s(99168);function x(M,b,E){if(!M||!b)return{display:"none"};const{x:P,y:k}=E;return{transform:`translate(${P}px, ${k}px)`}}function v({renderItem:M}){const{itemType:b,isDragging:E,item:P,initialOffset:k,currentOffset:U,mouseOffset:B}=(0,S.useDragLayer)(O=>({item:O.getItem(),itemType:O.getItemType(),initialOffset:O.getInitialSourceClientOffset(),currentOffset:O.getSourceClientOffset(),isDragging:O.isDragging(),mouseOffset:O.getClientOffset()}));return E?m.createElement(p.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},m.createElement(p.x,{style:x(k,U,B)},M({type:b,item:P}))):null}v.propTypes={renderItem:C().func.isRequired}},27661:(W,L,s)=>{var m=s(53547);const p=(0,m.createContext)();var A=null},21440:(W,L,s)=>{s.d(L,{PL:()=>S,Y9:()=>x.Y,zE:()=>oe,Ky:()=>ue,fi:()=>z,zH:()=>h,r5:()=>c});var m=s(53547),p=s(7694),A=s(25398);const S=()=>{const n=(0,p.v9)(A.Z),e=(0,m.useCallback)(t=>n?.components?.[t]??{},[n]);return{...n,getComponentLayout:e}};var x=s(79116),v=s(5504),M=s(52861),b=s(42225),E=s(18172);const P={error:null,isLoading:!0,layout:{},layouts:{}},U=(n,e)=>(0,E.default)(n,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.error=null,t.layout={};break}case"GET_DATA_SUCCEEDED":{const a=e.data.contentType.uid;t.layout=e.data,t.layouts[a]=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1,t.error=e.error;break}case"SET_LAYOUT_FROM_STATE":{t.error=null,t.layout=n.layouts[e.uid];break}case"UPDATE_LAYOUT":{const a=n.layout;t.layout={...a,contentType:{uid:a.contentType.uid,...e.newLayout.contentType}},t.layouts[a.contentType.uid]={...a,contentType:{uid:a.contentType.uid,...e.newLayout.contentType}};break}default:return t}});var B=s(50361),O=s.n(B),H=s(27361),R=s.n(H),J=s(36968),j=s.n(J),re=s(44949);const w=(n,e)=>e.find(t=>t.uid===n),q=(n,e)=>{const t=G(n,e),a=F(t.contentType,e),u=_(t.contentType,t.components);return j()(t,["contentType","layouts","edit"],a),j()(t,["contentType","layouts","list"],u),Object.keys(t.components).forEach(i=>{const f=F(t.components[i],e);j()(t,["components",i,"layouts","edit"],f)}),t},G=(n,e)=>{const t=(0,re.w8)(O()(n),e,"contentType"),{components:a,contentType:u}=t,i=f=>Object.keys(f.metadatas).reduce((g,D)=>{const T=R()(f,["attributes",D],{});let I=f.metadatas[D];if(T.type==="relation"){const fe=w(T.targetModel,e),N=I.edit.mainField,V={name:N,schema:R()(fe,["attributes",N])};I={list:{...I.list,mainField:V},edit:{...I.edit,mainField:V}}}return g[D]=I,g},{});return j()(t,["contentType","metadatas"],i(u)),Object.keys(a).forEach(f=>{const g=a[f],D=i(g);j()(t,["components",f,"metadatas"],D)}),t},F=(n,e)=>n.layouts.edit.reduce((t,a)=>{const u=a.map(i=>{const f=R()(n,["attributes",i.name],{}),g={...i,fieldSchema:f,metadatas:R()(n,["metadatas",i.name,"edit"],{})};if(f.type==="relation"){const T=w(f.targetModel,e).pluginOptions||{};j()(g,"targetModelPluginOptions",T),j()(g,"queryInfos",{shouldDisplayRelationLink:Y(n,i.name,e)})}return g});return t.push(u),t},[]),_=(n,e)=>n.layouts.list.reduce((a,u)=>{const i=R()(n,["attributes",u],{}),f=R()(n,["metadatas",u,"list"],{}),g=i.type;if(g==="relation")return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:f}),a;if(g==="component"){const D=e[i.component],T=D.settings.mainField,I=D.attributes[T];return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:{...f,mainField:{...I,name:T}}}),a}return a.push({key:`__${u}_key__`,name:u,fieldSchema:i,metadatas:f}),a},[]),Y=(n,e,t)=>{const a=R()(n,["attributes",e,"targetModel"],"");return K(t).includes(a)},K=n=>n.filter(e=>e.isDisplayed).map(({uid:e})=>e),Z=q,oe=n=>{const[{error:e,isLoading:t,layout:a,layouts:u},i]=(0,m.useReducer)(U,P),f=(0,m.useMemo)(b.Vo,[]),{schemas:g}=(0,p.v9)(N=>f(N),p.wU),D=(0,m.useRef)(!0),{get:T}=(0,v.useFetchClient)(),I=(0,m.useCallback)(async(N,V)=>{if(u[N]){i({type:"SET_LAYOUT_FROM_STATE",uid:N});return}i({type:"GET_DATA"});try{const{data:{data:se}}=await T(`/content-manager/content-types/${N}/configuration`,{cancelToken:V.token});i({type:"GET_DATA_SUCCEEDED",data:Z(se,g)})}catch(se){if(M.default.isCancel(se))return;D.current&&console.error(se),D.current&&i({type:"GET_DATA_ERROR",error:se})}},[u,g,T]);(0,m.useEffect)(()=>()=>{D.current=!1},[]),(0,m.useEffect)(()=>{const V=M.default.CancelToken.source();return I(n,V),()=>{V.cancel("Operation canceled by the user.")}},[n,I]);const fe=(0,m.useCallback)(N=>{i({type:"UPDATE_LAYOUT",newLayout:Z(N,g)})},[g]);return{error:e,isLoading:t,layout:a,updateLayout:fe}},ie=n=>n["content-manager_app"].collectionTypeLinks;var ae=s(13218),ye=s.n(ae),$=s(80129);const y=(n,e)=>Object.keys(n).reduce((t,a)=>{const u=n[a],i=R()(e,[a],u);return ye()(u)?{...t,[a]:y(u,i)}:(t[a]=i,t)},{}),le=(n,e,t)=>{const a=n.find(({to:I})=>I.includes(e));if(!a)return"/";const{to:u,search:i}=a,f=(0,$.parse)(i),g=(0,$.parse)(t.substring(1)),D=y(f,g);return`${u}?${(0,$.stringify)(D,{encode:!1})}`},ue=n=>{const[{rawQuery:e}]=(0,v.useQueryParams)(),t=(0,p.v9)(ie);return le(t,n,e)};var pe=s(25950),Q=s(16550);const z=()=>{const{search:n}=(0,Q.TH)(),e=n?(0,$.parse)(n.substring(1)):{};return e.plugins?(0,$.stringify)({plugins:e.plugins},{encode:!1}):""},h=n=>{const e=(0,m.useRef)();return(0,m.useEffect)(()=>{e.current=n},[n]),e.current};var X=s(14996);const ce=(n,e,t)=>({type:X.m,permissions:n,__meta__:{plugins:e,containerName:t}}),ne=()=>({type:X.Q}),de=n=>n["content-manager_rbacManager"].permissions,me=n=>n.rbacProvider.collectionTypesRelatedPermissions,c=(n,e,t="listView")=>{const a=(0,p.v9)(me),u=(0,p.v9)(de),i=(0,p.I0)(),f=a[e];return(0,m.useEffect)(()=>f?(i(ce(f,n?n.plugins:null,t)),()=>{i(ne())}):()=>{},[f,i,n,t]),u};var l=s(27661);const o=()=>useContext(WysiwygContext),d=null},79116:(W,L,s)=>{s.d(L,{Y:()=>S});var m=s(53547),p=s(99168),A=s.n(p),C=s(25950);const S=(x,{type:v="STRAPI_DND",index:M,item:b={},onStart:E,onEnd:P,onGrabItem:k,onDropItem:U,onCancel:B,onMoveItem:O,dropSensitivity:H="regular"})=>{const R=(0,m.useRef)(null),[{handlerId:J},j]=(0,p.useDrop)({accept:v,collect(F){return{handlerId:F.getHandlerId()}},hover(F,_){if(!R.current)return;const Y=F.index,K=M;if(Y!==K){if(H==="regular"){const Z=R.current.getBoundingClientRect(),ee=(Z.bottom-Z.top)/2,te=_.getClientOffset().y-Z.top;if(Y<K&&te<ee||Y>K&&te>ee)return}O(K,Y),F.index=K}}}),[{isDragging:re},w,q]=(0,p.useDrag)({type:v,item(){E&&E();const{width:F}=R.current?.getBoundingClientRect()??{};return{index:M,width:F,...b}},end(){P&&P()},canDrag:x,isDragging:b.id?F=>b.id===F.getItem().id:void 0,collect:F=>({isDragging:F.isDragging()})}),G=(0,C.A)(x,M,{onGrabItem:k,onDropItem:U,onCancel:B,onMoveItem:O});return[{handlerId:J,isDragging:re,handleKeyDown:G},R,j,w,q]}},25950:(W,L,s)=>{s.d(L,{A:()=>p});var m=s(53547);const p=(A,C,{onCancel:S,onDropItem:x,onGrabItem:v,onMoveItem:M})=>{const[b,E]=(0,m.useState)(!1),P=O=>{b&&(O==="UP"?M(C-1,C):O==="DOWN"&&M(C+1,C))},k=()=>{b?(x&&x(C),E(!1)):(v&&v(C),E(!0))},U=()=>{b&&(E(!1),S&&S(C))};return O=>{if(A&&!(O.key==="Tab"&&!b))switch(O.preventDefault(),O.key){case" ":case"Enter":k();break;case"Escape":U();break;case"ArrowDown":case"ArrowRight":P("DOWN");break;case"ArrowUp":case"ArrowLeft":P("UP");break;default:}}}},42225:(W,L,s)=>{s.d(L,{Jg:()=>M,KQ:()=>x,Vo:()=>v,Yg:()=>A});var m=s(20573),p=s(23301);const A=()=>E=>E["content-manager_app"]||p.E,C=()=>createSelector(A(),E=>E),S=()=>createSelector(A(),E=>E.models),x=()=>(0,m.P1)(A(),E=>({collectionTypeLinks:E.collectionTypeLinks,singleTypeLinks:E.singleTypeLinks})),v=()=>(0,m.P1)(A(),({components:E,models:P})=>({schemas:[...E,...P]})),M=(0,m.P1)(A(),E=>E.fieldSizes);var b=null},25398:(W,L,s)=>{s.d(L,{Z:()=>p});const p=A=>A["content-manager_editViewLayoutManager"].currentLayout},56837:(W,L,s)=>{s.d(L,{Z:()=>m});const m={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},45283:(W,L,s)=>{s.d(L,{Z:()=>p});const p=A=>`content-manager.${A}`},44949:(W,L,s)=>{s.d(L,{_Q:()=>te.Z,W3:()=>C,ko:()=>M,FE:()=>E,Di:()=>B,Ex:()=>me,du:()=>J,TA:()=>w,Ts:()=>_,Uo:()=>K,IF:()=>ee,OB:()=>oe.Z,w8:()=>$,kc:()=>le});var m=s(50361),p=s.n(m);const C=(r,c,l)=>{if(Array.isArray(r)&&c>=0&&l>=0&&c<=r.length-1&&l<=r.length-1){const o=p()(r),d=o.splice(c,1);return o.splice(l,0,d[0]),o}return r};var S=s(7334),x=s.n(S);const M=r=>{const c=r.type;return c==="relation"?!x()(r.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(c)&&!!c},b=(r,c)=>{typeof r=="function"?r(c):r!=null&&(r.current=c)},E=(...r)=>c=>r.forEach(l=>b(l,c));var P=s(27361),k=s.n(P);const U=(r,c)=>Object.keys(r).reduce((l,o)=>{const d=k()(r,[o],{}),{default:n,component:e,type:t,required:a,min:u,repeatable:i}=d;if(n!==void 0&&(l[o]=n),t==="component"){const f=c?.[e]?.attributes??{},g=U(f,c);if(a===!0&&(l[o]=i===!0?[]:g),u&&i===!0&&a){l[o]=[];for(let D=0;D<u;D+=1)l[o].push(g)}}return t==="dynamiczone"&&a===!0&&(l[o]=[]),l},{}),B=U;var O=s(57557),H=s.n(O);const J=({layouts:r,metadatas:c,...l})=>{const o=r.list.map(e=>e.name?e.name:e),d=Object.keys(c).reduce((e,t)=>{const a=k()(c,[t],{});let u=a.edit;return u.mainField&&(u={...u,mainField:a.edit.mainField.name}),{...e,[t]:{edit:u,list:H()(a.list,["mainField"])}}},{}),n=r.edit.map(e=>e.map(({name:t,size:a})=>({name:t,size:a})));return{...l,layouts:{edit:n,list:o},metadatas:d}},j=(r,c)=>r.map(l=>({...l,subject:c})),w=r=>{const c={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(c).reduce((l,o)=>(l[o]=j(c[o],r),l),{})};var q=s(7654),G=s.n(q);const _=r=>r.split(".").filter(c=>G()(parseInt(c,10))),K=r=>{if(r.length===0)return-1;const c=Math.max.apply(Math,r.map(l=>l.__temp_key__??0));return Number.isNaN(c)?-1:c},ee=r=>`/content-manager/${r}`;var oe=s(45283),te=s(56837),ie=s(36968),ae=s.n(ie);const $=(r,c,l)=>{const o=t=>c.find(a=>a.uid===t),d=Object.assign({},r),n=r[l].uid,e=o(n);return ae()(d,[l],{...r[l],...e}),Object.keys(r.components).forEach(t=>{const a=o(t);ae()(d,["components",t],{...r.components[t],...a})}),d};var y=s(5504);const le=(r,c,l)=>{const o=(d,n)=>Object.keys(d).reduce((e,t)=>{const a=(0,y.getType)(n,t),u=k()(d,t),i=(0,y.getOtherInfos)(n,[t,"component"]),f=(0,y.getOtherInfos)(n,[t,"repeatable"]);return a==="dynamiczone"?(e[t]=u.map(g=>o(g,l[g.__component])),e):a==="component"?(f?e[t]=u&&u.map(g=>o(g,l[i])):e[t]=u&&o(u,l[i]),e):(a!=="password"&&(e[t]=u),e)},{});return o(r,c)};var ge=s(51584),ue=s.n(ge),pe=s(41609),Q=s.n(pe),Ee=s(14841),z=s.n(Ee),h=s(87561),X=s(72262);h.addMethod(h.mixed,"defined",function(){return this.test("defined",y.translatedErrors.required,r=>r!==void 0)}),h.addMethod(h.array,"notEmptyMin",function(r){return this.test("notEmptyMin",y.translatedErrors.min,c=>Q()(c)?!0:c.length>=r)}),h.addMethod(h.string,"isInferior",function(r,c){return this.test("isInferior",r,function(l){return!l||Number.isNaN(z()(l))?!0:z()(c)>=z()(l)})}),h.addMethod(h.string,"isSuperior",function(r,c){return this.test("isSuperior",r,function(l){return!l||Number.isNaN(z()(l))?!0:z()(l)>=z()(c)})});const ce=r=>k()(r,["attributes"],{}),ne=(r,{components:c},l={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const o=ce(r);return h.object().shape(Object.keys(o).reduce((d,n)=>{const e=o[n];if(e.type!=="relation"&&e.type!=="component"&&e.type!=="dynamiczone"){const t=de(e.type,e,l);d[n]=t}if(e.type==="relation"&&(d[n]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(e.relationType)?h.object().nullable():h.array().nullable()),e.type==="component"){const t=ne(c[e.component],{components:c},{...l,isFromComponent:!0});if(e.repeatable===!0){const{min:u,max:i,required:f}=e;let g=h.lazy(D=>{let T=h.array().of(t);return u?f?T=T.min(u,y.translatedErrors.min):f!==!0&&Q()(D)?T=T.nullable():T=T.min(u,y.translatedErrors.min):f&&!l.isDraft&&(T=T.min(1,y.translatedErrors.required)),i&&(T=T.max(i,y.translatedErrors.max)),T});return d[n]=g,d}const a=h.lazy(u=>u!==void 0?e.required===!0&&!l.isDraft?t.defined():t.nullable():e.required===!0?h.object().defined():h.object().nullable());return d[n]=a,d}if(e.type==="dynamiczone"){let t=h.array().of(h.lazy(({__component:i})=>ne(c[i],{components:c},{...l,isFromComponent:!0})));const{max:a,min:u}=e;u?e.required?t=t.test("min",y.translatedErrors.min,i=>l.isCreatingEntry?i&&i.length>=u:i===void 0?!0:i!==null&&i.length>=u).test("required",y.translatedErrors.required,i=>l.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null):t=t.notEmptyMin(u):e.required&&!l.isDraft&&(t=t.test("required",y.translatedErrors.required,i=>l.isCreatingEntry?i!==null||i!==void 0:i===void 0?!0:i!==null)),a&&(t=t.max(a,y.translatedErrors.max)),d[n]=t}return d},{}))},de=(r,c,l)=>{let o=h.mixed();return["string","uid","text","richtext","email","password","enumeration"].includes(r)&&(o=h.string()),r==="json"&&(o=h.mixed(y.translatedErrors.json).test("isJSON",y.translatedErrors.json,d=>{if(!d||!d.length)return!0;try{return JSON.parse(d),!0}catch{return!1}}).nullable().test("required",y.translatedErrors.required,d=>!(c.required&&(!d||!d.length)))),r==="email"&&(o=o.email(y.translatedErrors.email)),["number","integer","float","decimal"].includes(r)&&(o=h.number().transform(d=>G()(d)?void 0:d).typeError()),r==="biginteger"&&(o=h.string().matches(/^-?\d*$/)),["date","datetime"].includes(r)&&(o=h.date()),Object.keys(c).forEach(d=>{const n=c[d];if(n||!ue()(n)&&Number.isInteger(Math.floor(n))||n===0)switch(d){case"required":{l.isDraft||(r==="password"&&l.isCreatingEntry&&(o=o.required(y.translatedErrors.required)),r!=="password"&&(l.isCreatingEntry?o=o.required(y.translatedErrors.required):o=o.test("required",y.translatedErrors.required,e=>e===void 0&&!l.isFromComponent?!0:(0,X.Z)(r)?e===0?!0:!!e:r==="boolean"?e!=null:r==="date"||r==="datetime"?typeof e=="string"?!Q()(e):!Q()(e?.toString()):!Q()(e))));break}case"max":{r==="biginteger"?o=o.isInferior(y.translatedErrors.max,n):o=o.max(n,y.translatedErrors.max);break}case"maxLength":o=o.max(n,y.translatedErrors.maxLength);break;case"min":{r==="biginteger"?o=o.isSuperior(y.translatedErrors.min,n):o=o.min(n,y.translatedErrors.min);break}case"minLength":{l.isDraft||(o=o.min(n,y.translatedErrors.minLength));break}case"regex":o=o.matches(new RegExp(n),{message:y.translatedErrors.regex,excludeEmptyString:!c.required});break;case"lowercase":["text","textarea","email","string"].includes(r)&&(o=o.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(r)&&(o=o.strict().uppercase());break;case"positive":(0,X.Z)(r)&&(o=o.positive());break;case"negative":(0,X.Z)(r)&&(o=o.negative());break;default:o=o.nullable()}}),o},me=ne},72262:(W,L,s)=>{s.d(L,{Z:()=>m});function m(p){return["integer","biginteger","decimal","float","number"].includes(p)}}}]);
