"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[9460],{93084:(A,h,t)=>{t.r(h),t.d(h,{default:()=>G});var e=t(53547),o=t(75336),E=t(86896),v=t(94649),s=t(5504),j=t(46683),l=t(57713),p=t(79371),g=t(26789),y=t(19442),S=t(50781),x=t(75878),n=t(78549),i=t(9370),r=t(61585),d=t(50614),c=t(473),f=t(8675),B=t(51725),a=t(42722);const R=[{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email"),defaultMessage:"One account per email address"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email"),defaultMessage:"Disallow the user to create multiple accounts using the same email address with different authentication providers."},name:"unique_email",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.sign-up"),defaultMessage:"Enable sign-ups"},description:{id:(0,a.OB)("EditForm.inputToggle.description.sign-up"),defaultMessage:"When disabled (OFF), the registration process is forbidden. No one can subscribe anymore no matter the used provider."},name:"allow_register",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-reset-password"),defaultMessage:"Reset password page"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-reset-password"),defaultMessage:"URL of your application's reset password page."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-reset-password"),defaultMessage:"ex: https://youtfrontend.com/reset-password"},name:"email_reset_password",type:"text",size:{col:6,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation"),defaultMessage:"Enable email confirmation"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation"),defaultMessage:"When enabled (ON), new registered users receive a confirmation email."},name:"email_confirmation",type:"bool",size:{col:12,xs:12}},{intlLabel:{id:(0,a.OB)("EditForm.inputToggle.label.email-confirmation-redirection"),defaultMessage:"Redirection url"},description:{id:(0,a.OB)("EditForm.inputToggle.description.email-confirmation-redirection"),defaultMessage:"After you confirmed your email, choose where you will be redirected."},placeholder:{id:(0,a.OB)("EditForm.inputToggle.placeholder.email-confirmation-redirection"),defaultMessage:"ex: https://youtfrontend.com/email-confirmation"},name:"email_confirmation_redirection",type:"text",size:{col:6,xs:12}}];var b=t(87561);const P=new RegExp("(^$)|((.+:\\/\\/.*)(d*)\\/?(.*))"),z=b.object().shape({email_confirmation_redirection:b.mixed().when("email_confirmation",{is:!0,then:b.string().matches(P).required(),otherwise:b.string().nullable()}),email_reset_password:b.string(s.translatedErrors.string).matches(P,s.translatedErrors.regex).nullable()}),N=async()=>{const{get:u}=(0,s.getFetchClient)(),{data:O}=await u((0,a.Gc)("advanced"));return O},U=u=>{const{put:O}=(0,s.getFetchClient)();return O((0,a.Gc)("advanced"),u)},W=()=>e.createElement(s.CheckPagePermissions,{permissions:B.Z.readAdvancedSettings},e.createElement(Z,null)),Z=()=>{const{formatMessage:u}=(0,E.Z)(),O=(0,s.useNotification)(),{lockApp:H,unlockApp:C}=(0,s.useOverlayBlocker)(),{notifyStatus:$}=(0,j.G)(),K=(0,o.useQueryClient)();(0,s.useFocusWhenNavigate)();const Q=(0,e.useMemo)(()=>({update:B.Z.updateAdvancedSettings}),[]),{isLoading:X,allowedActions:{canUpdate:V}}=(0,s.useRBAC)(Q),{status:Y,data:D}=(0,o.useQuery)("advanced",()=>N(),{onSuccess(){$(u({id:(0,a.OB)("Form.advancedSettings.data.loaded"),defaultMessage:"Advanced settings data has been loaded"}))},onError(){O({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}})}}),k=X||Y!=="success",I=(0,o.useMutation)(M=>U(M),{async onSuccess(){await K.invalidateQueries("advanced"),O({type:"success",message:{id:(0,a.OB)("notification.success.saved"),defaultMessage:"Saved"}}),C()},onError(){O({type:"warning",message:{id:(0,a.OB)("notification.error"),defaultMessage:"An error occured"}}),C()},refetchActive:!0}),{isLoading:J}=I,q=async M=>{H();const L=M.email_confirmation?M.email_confirmation_redirection:"";await I.mutateAsync({...M,email_confirmation_redirection:L})};return k?e.createElement(l.o,{"aria-busy":"true"},e.createElement(s.SettingsPageTitle,{name:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(p.T,{title:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(g.D,null,e.createElement(s.LoadingIndicatorPage,null))):e.createElement(l.o,{"aria-busy":J},e.createElement(s.SettingsPageTitle,{name:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"})}),e.createElement(v.Formik,{onSubmit:q,initialValues:D.settings,validateOnChange:!1,validationSchema:z,enableReinitialize:!0},({errors:M,values:L,handleChange:w,isSubmitting:_})=>e.createElement(s.Form,null,e.createElement(p.T,{title:u({id:(0,a.OB)("HeaderNav.link.advancedSettings"),defaultMessage:"Advanced Settings"}),primaryAction:e.createElement(y.z,{loading:_,type:"submit",disabled:!V,startIcon:e.createElement(f.Z,null),size:"S"},u({id:"global.save",defaultMessage:"Save"}))}),e.createElement(g.D,null,e.createElement(S.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(x.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(n.Z,{variant:"delta",as:"h2"},u({id:"global.settings",defaultMessage:"Settings"})),e.createElement(i.r,{gap:6},e.createElement(r.P,{col:6,s:12},e.createElement(d.P,{label:u({id:(0,a.OB)("EditForm.inputSelect.label.role"),defaultMessage:"Default role for authenticated users"}),value:L.default_role,hint:u({id:(0,a.OB)("EditForm.inputSelect.description.role"),defaultMessage:"It will attach the new authenticated user to the selected role."}),onChange:m=>w({target:{name:"default_role",value:m}})},D.roles.map(m=>e.createElement(c.W,{key:m.type,value:m.type},m.name)))),R.map(m=>{let T=L[m.name];return T||(T=m.type==="bool"?!1:""),e.createElement(r.P,{key:m.name,...m.size},e.createElement(s.GenericInput,{...m,value:T,error:M[m.name],disabled:m.name==="email_confirmation_redirection"&&L.email_confirmation===!1,onChange:w}))}))))))))},G=W},42722:(A,h,t)=>{t.d(h,{YX:()=>v,Gc:()=>l,OB:()=>p.Z});var e=t(41609),o=t.n(e);const v=g=>Object.keys(g).reduce((y,S)=>{const x=g[S].controllers,n=Object.keys(x).reduce((i,r)=>(o()(x[r])||(i[r]=x[r]),i),{});return o()(n)||(y[S]={controllers:n}),y},{});var s=t(83086);const l=g=>`/${s.Z}/${g}`;var p=t(97961)},26789:(A,h,t)=>{t.d(h,{D:()=>E});var e=t(2790),o=t(50781);const E=({children:v})=>(0,e.jsx)(o.x,{paddingLeft:10,paddingRight:10,children:v})},79371:(A,h,t)=>{t.d(h,{T:()=>y});var e=t(2790),o=t(53547),E=t(88972);const v=n=>{const i=(0,o.useRef)(null),[r,d]=(0,o.useState)(!0),c=([f])=>{d(f.isIntersecting)};return(0,o.useEffect)(()=>{const f=i.current,B=new IntersectionObserver(c,n);return f&&B.observe(i.current),()=>{f&&B.disconnect()}},[i,n]),[i,r]};var s=t(79698);const j=(n,i)=>{const r=(0,s.W)(i);(0,o.useLayoutEffect)(()=>{const d=new ResizeObserver(r);return Array.isArray(n)?n.forEach(c=>{c.current&&d.observe(c.current)}):n.current&&d.observe(n.current),()=>{d.disconnect()}},[n,r])};var l=t(50781),p=t(75878),g=t(78549);const y=n=>{const i=(0,o.useRef)(null),[r,d]=(0,o.useState)(null),[c,f]=v({root:null,rootMargin:"0px",threshold:0});return j(c,()=>{c.current&&d(c.current.getBoundingClientRect())}),(0,o.useEffect)(()=>{i.current&&d(i.current.getBoundingClientRect())},[i]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:r?.height},ref:c,children:f&&(0,e.jsx)(x,{ref:i,...n})}),!f&&(0,e.jsx)(x,{...n,sticky:!0,width:r?.width})]})};y.displayName="HeaderLayout";const S=(0,E.default)(l.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,x=o.forwardRef(({navigationAction:n,primaryAction:i,secondaryAction:r,subtitle:d,title:c,sticky:f,width:B,...a},F)=>{const R=typeof d=="string";return f?(0,e.jsx)(S,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:B,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{children:[n&&(0,e.jsx)(l.x,{paddingRight:3,children:n}),(0,e.jsxs)(l.x,{children:[(0,e.jsx)(g.Z,{variant:"beta",as:"h1",...a,children:c}),R?(0,e.jsx)(g.Z,{variant:"pi",textColor:"neutral600",children:d}):d]}),r?(0,e.jsx)(l.x,{paddingLeft:4,children:r}):null]}),(0,e.jsx)(p.k,{children:i?(0,e.jsx)(l.x,{paddingLeft:2,children:i}):void 0})]})}):(0,e.jsxs)(l.x,{ref:F,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(l.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{minWidth:0,children:[(0,e.jsx)(g.Z,{as:"h1",variant:"alpha",...a,children:c}),r?(0,e.jsx)(l.x,{paddingLeft:4,children:r}):null]}),i]}),R?(0,e.jsx)(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:d}):d]})})},57713:(A,h,t)=>{t.d(h,{o:()=>s});var e=t(2790),o=t(88972),E=t(50781);const v=(0,o.default)(E.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,s=({labelledBy:j="main-content-title",...l})=>(0,e.jsx)(v,{"aria-labelledby":j,as:"main",id:"main-content",tabIndex:-1,...l})}}]);
