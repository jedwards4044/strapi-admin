"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[8418],{84210:(D,h,t)=>{t.r(h),t.d(h,{default:()=>ie});var e=t(53547),i=t(75336),v=t(86896),a=t(5504),M=t(46683),T=t(57713),d=t(79371),y=t(26789),E=t(51725),n=t(42722);const c=async()=>{const{get:o}=(0,a.getFetchClient)(),{data:g}=await o((0,n.Gc)("email-templates"));return g},B=o=>{const{put:g}=(0,a.getFetchClient)();return g((0,n.Gc)("email-templates"),o)};var l=t(45697),s=t.n(l),m=t(51541),u=t(42403),p=t(6090),r=t(62351),R=t(22996),b=t(78549),U=t(94487),A=t(80907),$=t(37527),Q=t(61378),W=t(36670),J=t(8675);const K=({canUpdate:o,onEditClick:g})=>{const{formatMessage:f}=(0,v.Z)();return e.createElement(m.i,{colCount:3,rowCount:3},e.createElement(u.h,null,e.createElement(p.Tr,null,e.createElement(r.Th,{width:"1%"},e.createElement(R.T,null,f({id:(0,n.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(r.Th,null,e.createElement(b.Z,{variant:"sigma",textColor:"neutral600"},f({id:(0,n.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(r.Th,{width:"1%"},e.createElement(R.T,null,f({id:(0,n.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(U.p,null,e.createElement(p.Tr,{...(0,a.onRowClick)({fn:()=>g("reset_password")})},e.createElement(r.Td,null,e.createElement(A.J,null,e.createElement(Q.Z,{"aria-label":f({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(r.Td,null,e.createElement(b.Z,null,f({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(r.Td,{...a.stopPropagation},e.createElement($.h,{onClick:()=>g("reset_password"),label:f({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:o&&e.createElement(W.Z,null)}))),e.createElement(p.Tr,{...(0,a.onRowClick)({fn:()=>g("email_confirmation")})},e.createElement(r.Td,null,e.createElement(A.J,null,e.createElement(J.Z,{"aria-label":f({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(r.Td,null,e.createElement(b.Z,null,f({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(r.Td,{...a.stopPropagation},e.createElement($.h,{onClick:()=>g("email_confirmation"),label:f({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:o&&e.createElement(W.Z,null)})))))};K.propTypes={canUpdate:s().bool.isRequired,onEditClick:s().func.isRequired};const X=K;var Y=t(94649),k=t(60881),w=t(18189),F=t(78784),q=t(48683),_=t(9370),I=t(61585),ee=t(20603),te=t(45124),H=t(19442),j=t(87561);const ae=j.object().shape({options:j.object().shape({from:j.object().shape({name:j.string().required(a.translatedErrors.required),email:j.string().email(a.translatedErrors.email).required(a.translatedErrors.required)}).required(),response_email:j.string().email(a.translatedErrors.email),object:j.string().required(a.translatedErrors.required),message:j.string().required(a.translatedErrors.required)}).required(a.translatedErrors.required)}),N=({template:o,onToggle:g,onSubmit:f})=>{const{formatMessage:x}=(0,v.Z)();return e.createElement(k.P,{onClose:g,labelledBy:`${x({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${x({id:(0,n.OB)(o.display),defaultMessage:o.display})}`},e.createElement(w.x,null,e.createElement(F.O,{label:`${x({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${x({id:(0,n.OB)(o.display),defaultMessage:o.display})}`},e.createElement(F.$,null,x({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(F.$,null,x({id:(0,n.OB)(o.display),defaultMessage:o.display})))),e.createElement(Y.Formik,{onSubmit:f,initialValues:o,validateOnChange:!1,validationSchema:ae,enableReinitialize:!0},({errors:O,values:P,handleChange:C,isSubmitting:Z})=>e.createElement(a.Form,null,e.createElement(q.f,null,e.createElement(_.r,{gap:5},e.createElement(I.P,{col:6,s:12},e.createElement(a.GenericInput,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:C,value:P.options.from.name,error:O?.options?.from?.name,type:"text"})),e.createElement(I.P,{col:6,s:12},e.createElement(a.GenericInput,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:C,value:P.options.from.email,error:O?.options?.from?.email,type:"text"})),e.createElement(I.P,{col:6,s:12},e.createElement(a.GenericInput,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:C,value:P.options.response_email,error:O?.options?.response_email,type:"text"})),e.createElement(I.P,{col:6,s:12},e.createElement(a.GenericInput,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:C,value:P.options.object,error:O?.options?.object,type:"text"})),e.createElement(I.P,{col:12,s:12},e.createElement(ee.g,{label:x({id:(0,n.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:C,value:P.options.message,error:O?.options?.message&&x({id:O.options.message,defaultMessage:O.options.message})})))),e.createElement(te.m,{startActions:e.createElement(H.z,{onClick:g,variant:"tertiary"},"Cancel"),endActions:e.createElement(H.z,{loading:Z,type:"submit"},"Finish")}))))};N.propTypes={template:s().shape({display:s().string,icon:s().string,options:s().shape({from:s().shape({name:s().string,email:s().string}),message:s().string,object:s().string,response_email:s().string})}).isRequired,onSubmit:s().func.isRequired,onToggle:s().func.isRequired};const ne=N,se=()=>e.createElement(a.CheckPagePermissions,{permissions:E.Z.readEmailTemplates},e.createElement(le,null)),le=()=>{const{formatMessage:o}=(0,v.Z)(),{trackUsage:g}=(0,a.useTracking)(),{notifyStatus:f}=(0,M.G)(),x=(0,a.useNotification)(),{lockApp:O,unlockApp:P}=(0,a.useOverlayBlocker)(),C=(0,e.useRef)(g),Z=(0,i.useQueryClient)();(0,a.useFocusWhenNavigate)();const[oe,re]=(0,e.useState)(!1),[G,de]=(0,e.useState)(null),me=(0,e.useMemo)(()=>({update:E.Z.updateEmailTemplates}),[]),{isLoading:ce,allowedActions:{canUpdate:ue}}=(0,a.useRBAC)(me),{status:pe,data:z}=(0,i.useQuery)("email-templates",()=>c(),{onSuccess(){f(o({id:(0,n.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){x({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),Ee=ce||pe!=="success",S=()=>{re(L=>!L)},ge=L=>{de(L),S()},V=(0,i.useMutation)(L=>B({"email-templates":L}),{async onSuccess(){await Z.invalidateQueries("email-templates"),x({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),C.current("didEditEmailTemplates"),P(),S()},onError(){x({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),P()},refetchActive:!0}),{isLoading:fe}=V,he=L=>{O(),C.current("willEditEmailTemplates");const ve={...z,[G]:L};V.mutate(ve)};return Ee?e.createElement(T.o,{"aria-busy":"true"},e.createElement(a.SettingsPageTitle,{name:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(d.T,{title:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(y.D,null,e.createElement(a.LoadingIndicatorPage,null))):e.createElement(T.o,{"aria-busy":fe},e.createElement(a.SettingsPageTitle,{name:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(d.T,{title:o({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(y.D,null,e.createElement(X,{onEditClick:ge,canUpdate:ue}),oe&&e.createElement(ne,{template:z[G],onToggle:S,onSubmit:he})))},ie=se},42722:(D,h,t)=>{t.d(h,{YX:()=>a,Gc:()=>d,OB:()=>y.Z});var e=t(41609),i=t.n(e);const a=E=>Object.keys(E).reduce((n,c)=>{const B=E[c].controllers,l=Object.keys(B).reduce((s,m)=>(i()(B[m])||(s[m]=B[m]),s),{});return i()(l)||(n[c]={controllers:l}),n},{});var M=t(83086);const d=E=>`/${M.Z}/${E}`;var y=t(97961)},78784:(D,h,t)=>{t.d(h,{$:()=>E,O:()=>n});var e=t(2790),i=t(51682),v=t(88972),a=t(22996),M=t(75878),T=t(50781),d=t(78549);const y=(0,v.default)(M.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:c})=>c.colors.neutral500};
    }
  }
  :last-of-type ${T.x} {
    display: none;
  }
  :last-of-type ${d.Z} {
    color: ${({theme:c})=>c.colors.neutral800};
    font-weight: ${({theme:c})=>c.fontWeights.bold};
  }
`,E=({children:c})=>(0,e.jsxs)(y,{inline:!0,as:"li",children:[(0,e.jsx)(d.Z,{variant:"pi",textColor:"neutral600",children:c}),(0,e.jsx)(T.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3,children:(0,e.jsx)(i.Z,{})})]});E.displayName="Crumb";const n=({children:c,label:B,...l})=>(0,e.jsxs)(M.k,{...l,children:[(0,e.jsx)(a.T,{children:B}),(0,e.jsx)("ol",{"aria-hidden":!0,children:c})]});n.displayName="Breadcrumbs"},26789:(D,h,t)=>{t.d(h,{D:()=>v});var e=t(2790),i=t(50781);const v=({children:a})=>(0,e.jsx)(i.x,{paddingLeft:10,paddingRight:10,children:a})},79371:(D,h,t)=>{t.d(h,{T:()=>n});var e=t(2790),i=t(53547),v=t(88972);const a=l=>{const s=(0,i.useRef)(null),[m,u]=(0,i.useState)(!0),p=([r])=>{u(r.isIntersecting)};return(0,i.useEffect)(()=>{const r=s.current,R=new IntersectionObserver(p,l);return r&&R.observe(s.current),()=>{r&&R.disconnect()}},[s,l]),[s,m]};var M=t(79698);const T=(l,s)=>{const m=(0,M.W)(s);(0,i.useLayoutEffect)(()=>{const u=new ResizeObserver(m);return Array.isArray(l)?l.forEach(p=>{p.current&&u.observe(p.current)}):l.current&&u.observe(l.current),()=>{u.disconnect()}},[l,m])};var d=t(50781),y=t(75878),E=t(78549);const n=l=>{const s=(0,i.useRef)(null),[m,u]=(0,i.useState)(null),[p,r]=a({root:null,rootMargin:"0px",threshold:0});return T(p,()=>{p.current&&u(p.current.getBoundingClientRect())}),(0,i.useEffect)(()=>{s.current&&u(s.current.getBoundingClientRect())},[s]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:m?.height},ref:p,children:r&&(0,e.jsx)(B,{ref:s,...l})}),!r&&(0,e.jsx)(B,{...l,sticky:!0,width:m?.width})]})};n.displayName="HeaderLayout";const c=(0,v.default)(d.x)`
  width: ${({width:l})=>l?`${l/16}rem`:void 0};
  z-index: ${({theme:l})=>l.zIndices[1]};
`,B=i.forwardRef(({navigationAction:l,primaryAction:s,secondaryAction:m,subtitle:u,title:p,sticky:r,width:R,...b},U)=>{const A=typeof u=="string";return r?(0,e.jsx)(c,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:R,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(y.k,{justifyContent:"space-between",children:[(0,e.jsxs)(y.k,{children:[l&&(0,e.jsx)(d.x,{paddingRight:3,children:l}),(0,e.jsxs)(d.x,{children:[(0,e.jsx)(E.Z,{variant:"beta",as:"h1",...b,children:p}),A?(0,e.jsx)(E.Z,{variant:"pi",textColor:"neutral600",children:u}):u]}),m?(0,e.jsx)(d.x,{paddingLeft:4,children:m}):null]}),(0,e.jsx)(y.k,{children:s?(0,e.jsx)(d.x,{paddingLeft:2,children:s}):void 0})]})}):(0,e.jsxs)(d.x,{ref:U,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0,children:[l?(0,e.jsx)(d.x,{paddingBottom:2,children:l}):null,(0,e.jsxs)(y.k,{justifyContent:"space-between",children:[(0,e.jsxs)(y.k,{minWidth:0,children:[(0,e.jsx)(E.Z,{as:"h1",variant:"alpha",...b,children:p}),m?(0,e.jsx)(d.x,{paddingLeft:4,children:m}):null]}),s]}),A?(0,e.jsx)(E.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:u}):u]})})},57713:(D,h,t)=>{t.d(h,{o:()=>M});var e=t(2790),i=t(88972),v=t(50781);const a=(0,i.default)(v.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,M=({labelledBy:T="main-content-title",...d})=>(0,e.jsx)(a,{"aria-labelledby":T,as:"main",id:"main-content",tabIndex:-1,...d})}}]);
